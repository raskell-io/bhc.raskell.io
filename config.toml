# Zola configuration for bhc website
# https://www.getzola.org/documentation/getting-started/configuration/

base_url = "https://bhc.raskell.io"
title = "BHC - Basel Haskell Compiler"
description = "An alternative compiler for Haskell: compatibility-first, with a modern runtime, multiple targets, and opt-in extensions."
default_language = "en"
theme = "brutalist-blueprint"

# Compile Sass/SCSS
compile_sass = true

# Generate feed
generate_feeds = false

# Build options
build_search_index = false
minify_html = true

[markdown]
smart_punctuation = true
external_links_target_blank = true
external_links_no_follow = true
external_links_no_referrer = true

[markdown.highlighting]
enabled = true
light_theme = "catppuccin-latte"
dark_theme = "catppuccin-mocha"

[slugify]
paths = "on"
anchors = "on"

[extra]
# Theme mode
mode = "product"

# Brand
brand_short = "BHC"

# Site metadata
author = "raskell.io"
author_type = "Organization"
github_repo = "https://github.com/raskell-io/bhc"
docs_url = "/get-started/"

# SEO metadata
keywords = "haskell, compiler, alternative, ghc compatible, runtime profiles, wasm, numeric, tensor, structured concurrency"
og_image = "img/og-image.png"
og_image_width = 1200
og_image_height = 630
og_image_alt = "BHC - Basel Haskell Compiler: An alternative compiler for Haskell"
twitter_handle = "@raskell_io"

# Favicon
favicon = "favicon.ico"
favicon_png = "favicon.png"
icon_192 = "icon-192.png"
apple_touch_icon = "apple-touch-icon.png"
webmanifest = "site.webmanifest"

# Social links
github = "https://github.com/raskell-io/bhc"

# Product configuration
[extra.product]
tagline = "Basel Haskell Compiler"
tagline_sub = "Compatibility-first. Profiles for performance."
subtitle = "An alternative compiler for Haskell with a modern runtime, multiple targets, and opt-in extensions."
gradient_title = true
badge = "alpha"
badge_url = "https://github.com/raskell-io/bhc"
features_title = "[ CAPABILITIES ]"
features_subtitle = "What BHC brings to the table"
footer_tagline = "Functional. Portable. Fast. Haskell that ships."
footer_note = "© 2025 raskell.io. Released under the MIT License."

# Install methods for dropdown
[[extra.product.install_methods]]
id = "script"
label = "Script"
command = "curl -fsSL https://bhc.raskell.io/install.sh | sh"
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="m10 8 4 4-4 4"/></svg>"""
default = true

[[extra.product.install_methods]]
id = "cargo"
label = "Cargo"
command = "cargo install bhc"
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linejoin="round" stroke-width="1"><path stroke-linecap="round" d="M1.5 7L8 10.5L14.5 7m-10-2.5l3.503 2L14.498 3M4.5 5.5v7m3.5-6V14"/><path stroke-linecap="round" d="M8.003 3L11.5 4.5v8"/><path stroke-linecap="square" d="M1.5 6.984V11l6.503 3.5L14.5 11V3L11 1.5l-6.5 3v1z"/></g></svg>"""

[[extra.product.features]]
title = "Compatibility-first"
description = "Targets Haskell 2010 and selected GHC editions. Use existing .cabal files and Hackage packages. Your code works unchanged."
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 3h5v5"/><path d="M8 3H3v5"/><path d="M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3"/><path d="m15 9 6-6"/></svg>"""

[[extra.product.features]]
title = "Runtime profiles"
description = "Same source language, different runtime contracts. Choose default, server, numeric, or edge profiles per package."
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4" width="6" height="6" rx="1"/><rect x="14" y="4" width="6" height="6" rx="1"/><rect x="4" y="14" width="6" height="6" rx="1"/><rect x="14" y="14" width="6" height="6" rx="1"/></svg>"""

[[extra.product.features]]
title = "Numeric performance"
description = "Tensor-native pipeline, guaranteed fusion patterns, SIMD lowering. Predictable performance for numeric workloads."
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/></svg>"""

[[extra.product.features]]
title = "Multiple targets"
description = "Native compilation for servers, WASI/WASM for sandboxed compute and edge. Haskell doesn't mean one runtime on one OS."
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 3h12l4 6-10 13L2 9Z"/><path d="M11 3 8 9l4 13 4-13-3-6"/><path d="M2 9h20"/></svg>"""

[[extra.product.features]]
title = "Structured concurrency"
description = "Server profile brings cancellation, deadlines, and scoping. Observability hooks for tracing and debugging."
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="m9 12 2 2 4-4"/></svg>"""

[[extra.product.features]]
title = "Opt-in extensions"
description = "BHC innovations are explicit. Enable BHC2026 bundle or individual BHC.* extensions. Stay portable or specialize."
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>"""

# Benchmark highlights
[extra.product.benchmarks]
enabled = false

# Runtime profiles with examples
[[extra.product.profiles]]
id = "default"
name = "Default"
description = "General-purpose compilation. Focuses on correctness and GHC compatibility. Suitable for most applications."
example_file = "Main.hs"
example_code = """module Main where

import Data.List (sort)

-- Entry point: standard Haskell 2010
main :: IO ()
main = do
    let numbers = [3, 1, 4, 1, 5, 9, 2, 6]
    putStrLn "Sorted list:"
    print (sort numbers)

-- Pure function, fully compatible with GHC
factorial :: Integer -> Integer
factorial 0 = 1
factorial n = n * factorial (n - 1)"""
usage = "bhc Main.hs"

[[extra.product.profiles]]
id = "server"
name = "Server"
description = "Structured concurrency, cancellation, deadlines. Built-in observability hooks for production services."
example_file = "Server.hs"
example_code = """{-# LANGUAGE BHC.StructuredConcurrency #-}
module Server where

import Control.Concurrent.Scoped
import Control.Concurrent.Deadline

-- Handler with automatic cancellation propagation
handler :: Request -> Scoped Response
handler req = withTimeout 5000 $ do
    -- Spawn concurrent tasks within scope
    userData  <- async $ fetchUser req.userId
    orderData <- async $ fetchOrders req.userId

    -- Both cancelled if either fails or times out
    user   <- await userData
    orders <- await orderData

    -- Build response (observability hooks auto-attached)
    return $ Response user orders"""
usage = "bhc --profile=server Server.hs"

[[extra.product.profiles]]
id = "numeric"
name = "Numeric"
description = "Strict-by-default in hot paths, unboxed numerics, tensor lowering, SIMD. For computational workloads."
example_file = "Compute.hs"
example_code = """{-# LANGUAGE BHC.TensorIR #-}
{-# LANGUAGE BHC.StrictDefault #-}
module Compute where

import Data.Tensor

-- Matrix multiply: fused and vectorized automatically
matmul :: Tensor Float -> Tensor Float -> Tensor Float
matmul a b = contract a b [1] [0]

-- Element-wise ops get SIMD lowering
normalize :: Tensor Float -> Tensor Float
normalize t = t / sqrt (sum (t * t))

-- Guaranteed fusion: no intermediate allocations
pipeline :: Tensor Float -> Tensor Float -> Float
pipeline x w = sum (normalize (matmul x w))"""
usage = "bhc --profile=numeric Compute.hs"

[[extra.product.profiles]]
id = "edge"
name = "Edge"
description = "Minimal runtime footprint for WASM and embedded targets. Reduced GC, smaller binaries."
example_file = "Lambda.hs"
example_code = """module Lambda where

-- Export for WASM host to call
foreign export ccall handler :: Int -> Int

-- Pure computation, no runtime dependencies
handler :: Int -> Int
handler x = fibonacci x

-- Optimized for small binary size
fibonacci :: Int -> Int
fibonacci n
    | n <= 1    = n
    | otherwise = fibonacci (n-1) + fibonacci (n-2)

-- Memory: single-pass, minimal allocation
sumList :: [Int] -> Int
sumList = foldl' (+) 0"""
usage = "bhc --profile=edge --target=wasm32-wasi Lambda.hs"

# FAQ
[[extra.product.faq]]
question = "Is BHC a fork of GHC?"
answer = "No. BHC is a clean-slate compiler written in Rust. It targets the Haskell 2026 Platform specification and prioritizes predictable performance, structured concurrency, and a tensor-native numeric pipeline. It does not share code with GHC."

[[extra.product.faq]]
question = "Can I use my existing Haskell packages?"
answer = "BHC is actively working on real-world Haskell compatibility (M11). It supports LANGUAGE pragmas, the Haskell 2010 layout rule, the full module system, type classes, and many common extensions. Check the compatibility page for current status."

[[extra.product.faq]]
question = "What are runtime profiles?"
answer = "Profiles are compile-time configurations with different performance contracts. <strong>Default</strong>: lazy evaluation, GC-managed. <strong>Server</strong>: structured concurrency, bounded latency, observability. <strong>Numeric</strong>: strict-by-default, unboxed, guaranteed fusion. <strong>Edge</strong>: minimal runtime for WASM."

[[extra.product.faq]]
question = "What makes the Numeric profile special?"
answer = "The Numeric profile guarantees fusion for standard patterns like <code>map f (map g x)</code> and <code>sum (map f x)</code>. No hidden allocations, SIMD auto-vectorization, and a Tensor IR that tracks shapes and strides. Fusion failure is a compiler bug."

[[extra.product.faq]]
question = "Does BHC support GPUs?"
answer = "Yes. The GPU backend generates CUDA and ROCm code for tensor operations. Write standard Haskell with tensor syntax; the compiler handles GPU code generation and memory transfers automatically."

[[extra.product.faq]]
question = "What about WebAssembly?"
answer = "BHC can target WASM for browser and edge deployment. Use <code>--target wasm32-wasi</code> with the Edge profile for minimal runtime footprint. SIMD128 is supported for numeric workloads."

[[extra.product.faq]]
question = "Is BHC production-ready?"
answer = "BHC has completed milestones M0–M10 (core compiler, profiles, GPU, WASM, diagnostics). M11 focusing on real-world Haskell compatibility is in progress. Suitable for new projects; existing codebases increasingly supported."

[[extra.product.faq]]
question = "How do I report bugs or contribute?"
answer = "Open an issue or discussion on <a href=\"https://github.com/raskell-io/bhc\" target=\"_blank\" rel=\"noopener\">GitHub</a>. We follow conventional commits and welcome contributions. See CLAUDE.md for development guidelines."

# Social links
[extra.social]
github = "https://github.com/raskell-io/bhc"
twitter = "https://x.com/raskell_io"

# Footer link groups
[[extra.product.footer_links]]
title = "Documentation"
[[extra.product.footer_links.links]]
text = "Get Started"
url = "/get-started/"
[[extra.product.footer_links.links]]
text = "Compatibility"
url = "/compatibility/"
[[extra.product.footer_links.links]]
text = "Profiles"
url = "/profiles/"
[[extra.product.footer_links.links]]
text = "Numeric"
url = "/numeric/"

[[extra.product.footer_links]]
title = "Resources"
[[extra.product.footer_links.links]]
text = "GitHub"
url = "https://github.com/raskell-io/bhc"
external = true
[[extra.product.footer_links.links]]
text = "Roadmap"
url = "/roadmap/"
[[extra.product.footer_links.links]]
text = "Changelog"
url = "https://github.com/raskell-io/bhc/blob/main/CHANGELOG.md"
external = true

[[extra.product.footer_links]]
title = "Community"
[[extra.product.footer_links.links]]
text = "Twitter / X"
url = "https://x.com/raskell_io"
external = true
[[extra.product.footer_links.links]]
text = "Discussions"
url = "https://github.com/raskell-io/bhc/discussions"
external = true

[[extra.product.footer_links]]
title = "Legal"
[[extra.product.footer_links.links]]
text = "License (MIT)"
url = "https://github.com/raskell-io/bhc/blob/main/LICENSE"
external = true

# Navigation
[[extra.nav_links]]
name = "Get Started"
url = "/get-started/"
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>"""

[[extra.nav_links]]
name = "Compatibility"
url = "/compatibility/"
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>"""

[[extra.nav_links]]
name = "Profiles"
url = "/profiles/"
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>"""

[[extra.nav_links]]
name = "Numeric"
url = "/numeric/"
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" y1="9" x2="20" y2="9"/><line x1="4" y1="15" x2="20" y2="15"/><line x1="10" y1="3" x2="8" y2="21"/><line x1="16" y1="3" x2="14" y2="21"/></svg>"""

[[extra.nav_links]]
name = "Targets"
url = "/targets/"
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>"""

[[extra.nav_links]]
name = "About"
url = "/about/"
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>"""

[[extra.nav_links]]
name = "Docs"
url = "/docs/"
icon = """<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>"""
